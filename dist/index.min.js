var e=/(<([\w-]+)(?:\s[^>]*)?>(?:.*?<\/\2>)?|[^<]+)/g,f=/^<([\w-]+)(\s[^>]*)?>(.*?)(?:<\/\1>)?$/,g="span script style pre textarea a abbr acronym b bdi bdo big button cite code del dfn em font i ins kbd mark q rt rp s samp small strike strong sub sup svg time tt u var".split(" ");function h(c,b,a,d){d&&(d=k(d.match(e),b).toString());a&&(a=a.replace(/ ([\w-]+?)="(.+?)"/g,',"$1":"$2"').substr(1));return'h("'+b+'"'+(a?",{attributes:{"+a+"}}":"")+(d?",["+d+"]":"")+")"}
function k(c,b){return c.map(function(a){a=0===a.indexOf("<")?a.replace(f,h):-1<g.indexOf(b)?JSON.stringify(a):/^\s+$/.test(a)?void 0:JSON.stringify(a.replace(/\s/g,""));return a}).filter(function(a){return a})}var l={"?":function(c,b){if(c)return b()},"^":function(c,b){if(!c)return b()},"#":function(c,b){return c.map(function(a){return b(a)})},"+":function(c,b){for(var a=[],d=0;d<c;d++)a.push(b(d));return a}};
module.exports=function(c,b){var a=c.trim().replace(/[\n\r]/g,"").replace(/\x3c!--.*?--\x3e/g,"").replace(f,h);return(new Function("r","h","o","return "+a.replace(/"{{([\#\?\^\+])(.+?)}}",/g,'r["$1"](o.$2,function(v){return ').replace(/,"{{\/.+?}}"/g,"})").replace(/{{(.+?)}}/g,"{{o.$1}}").replace(/{{o\.\.}}/g,"{{v}}").replace(/{{o\.\.(.+?)}}/g,"{{v.$1}}").replace(/("{{|}}")/g,"").replace(/{{/g,'"+').replace(/}}/g,'+"'))).bind(null,l,b)};